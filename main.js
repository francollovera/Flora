

const productos = [
  {
    "id": "abrigo-01",
    "titulo": "Escarapela 01",
    "imagen": "./img/ESCARAPELAS/WhatsApp Image 2023-09-04 at 6.09.31 PM (2).jpeg",
    "categoria": {
      "nombre": "Escarapelas",
      "id": "abrigos"
    },
    "precio": 4500
  },
  {
    "id": "abrigo-02",
    "titulo": "Escarapela 02",
    "imagen": "./img/ESCARAPELAS/WhatsApp Image 2023-09-04 at 6.09.31 PM.jpeg",
    "categoria": {
      "nombre": "Escarapelas",
      "id": "abrigos"
    },
    "precio": 2500
  },
  {
    "id": "abrigo-03",
    "titulo": "Escarapela 03",
    "imagen": "./img/ESCARAPELAS/WhatsApp Image 2023-09-04 at 6.09.32 PM (1).jpeg",
    "categoria": {
      "nombre": "Escarapelas",
      "id": "abrigos"
    },
    "precio": 3000
  },
  {
    "id": "abrigo-04",
    "titulo": "Escarapela 04",
    "imagen": "./img/ESCARAPELAS/WhatsApp Image 2023-09-04 at 6.09.33 PM (1).jpeg",
    "categoria": {
      "nombre": "Escarapelas",
      "id": "abrigos"
    },
    "precio": 4000
  },

  {
    "id": "camiseta-01",
    "titulo": "Pulsera 01",
    "imagen": "./img/PULSERAS/WhatsApp Image 2023-09-04 at 6.14.04 PM (1).jpeg",
    "categoria": {
      "nombre": "Pulseras",
      "id": "camisetas"
    },
    "precio": 3000
  },
  {
    "id": "camiseta-02",
    "titulo": "Pulsera 02",
    "imagen": "./img/PULSERAS/WhatsApp Image 2023-09-04 at 6.14.04 PM (2).jpeg",
    "categoria": {
      "nombre": "Pulseras",
      "id": "camisetas"
    },
    "precio": 3500
  },
  {
    "id": "camiseta-03",
    "titulo": "Pulsera 03",
    "imagen": "./img/PULSERAS/WhatsApp Image 2023-09-04 at 6.14.04 PM (3).jpeg",
    "categoria": {
      "nombre": "Pulseras",
      "id": "camisetas"
    },
    "precio": 3000
  },
  {
    "id": "camiseta-04",
    "titulo": "Pulsera 04",
    "imagen": "./img/PULSERAS/WhatsApp Image 2023-09-04 at 6.14.05 PM.jpeg",
    "categoria": {
      "nombre": "Camisetas",
      "id": "camisetas"
    },
    "precio": 3000
  },

  {
    "id": "pantalon-01",
    "titulo": "Dije 01",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.16.22 PM (1).jpeg",
    "categoria": {
      "nombre": "Dijes",
      "id": "pantalones"
    },
    "precio": 1000
  },
  {
    "id": "pantalon-02",
    "titulo": "Dije 02",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.16.22 PM (2).jpeg",
    "categoria": {
      "nombre": "Dijes",
      "id": "pantalones"
    },
    "precio": 3500
  },
  {
    "id": "pantalon-03",
    "titulo": "Dije 03",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.16.22 PM (3).jpeg",
    "categoria": {
      "nombre": "Dijes",
      "id": "pantalones"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aro 01",
    "imagen": "./img/AROS/Aro 01.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aro 02",
    "imagen": "./img/AROS/Aro 02.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 03",
    "imagen": "./img/AROS/Aro 03.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 04",
    "imagen": "./img/AROS/Aro 04.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 05",
    "imagen": "./img/AROS/Aro 05.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aro 06",
    "imagen": "./img/AROS/Aro 06.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 07",
    "imagen": "./img/AROS/Aro 07.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 08",
    "imagen": "./img/AROS/Aro 08.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 09",
    "imagen": "./img/AROS/Aro 09.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 10",
    "imagen": "./img/AROS/Aro 10.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aro 11",
    "imagen": "./img/AROS/Aro 11.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aro 12",
    "imagen": "./img/AROS/Aro 12.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 13",
    "imagen": "./img/AROS/Aro 13.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 14",
    "imagen": "./img/AROS/Aro 14.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 01",
    "imagen": "./img/AROS/Aro 15.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 6500
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 02",
    "imagen": "./img/AROS/Aro 16.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 12000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 03",
    "imagen": "./img/AROS/Aro 17.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 12000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 04",
    "imagen": "./img/AROS/Aro 18.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 12000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 05",
    "imagen": "./img/AROS/Aro 19.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 5000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 06",
    "imagen": "./img/AROS/Aro 20.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 8000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 07",
    "imagen": "./img/AROS/Aro 21.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 5000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 08",
    "imagen": "./img/AROS/Aro 22.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 6500
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 09",
    "imagen": "./img/AROS/Aro 23.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 6500
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 10",
    "imagen": "./img/AROS/Aro 24.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 8000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 11",
    "imagen": "./img/AROS/Aro 25.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 8000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 12",
    "imagen": "./img/AROS/Aro 26.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 8000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 13",
    "imagen": "./img/AROS/Aro 27.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3500
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 14",
    "imagen": "./img/AROS/Aro 28.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 4000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 15",
    "imagen": "./img/AROS/Aro 29.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 4000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 16",
    "imagen": "./img/AROS/Aro 30.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 8000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 17",
    "imagen": "./img/AROS/Aro 31.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 7000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 18",
    "imagen": "./img/AROS/Aro 32.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aros de Fiesta 19",
    "imagen": "./img/AROS/Aro 33.jpg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 3000
  },
  {
    "id": "aros",
    "titulo": "Aro 34",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.17.50 PM (1).jpeg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 35",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.17.50 PM.jpeg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
  {
    "id": "aros",
    "titulo": "Aro 36",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.17.51 PM (1).jpeg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2000
  },
  {
    "id": "aros",
    "titulo": "Aro 37",
    "imagen": "./img/DIJES Y AROS/WhatsApp Image 2023-09-04 at 6.17.51 PM (2).jpeg",
    "categoria": {
      "nombre": "Aros",
      "id": "aros"
    },
    "precio": 2500
  },
 

]

let productosEnCarrito;
let productosEnCarritoLS = localStorage.getItem("productos-en-carrito");

// Esta función cargará los productos en la página
function cargarTodosLosProductos() {
  // Llama a la función cargarProductos con el arreglo completo de productos
  cargarProductos(productos);

  // Establece el título principal
  tituloPrincipal.innerText = "Todos los productos";
}

// Llama a la función para cargar todos los productos cuando se carga la página
window.addEventListener('load', cargarTodosLosProductos);

const contenedorProductos = document.querySelector("#contenedor-productos");
const botonesCategorias = document.querySelectorAll(".boton-categoria");
const tituloPrincipal = document.querySelector("#titulo-principal");
let botonesAgregar = document.querySelectorAll(".producto-agregar");
const numerito = document.querySelector("#numerito");


botonesCategorias.forEach(boton => boton.addEventListener("click", () => {
  aside.classList.remove("aside-visible");
}))

function cargarProductos(productosElegidos) {
  contenedorProductos.innerHTML = "";
  
  // Crear una copia del array y revertir el orden
  const productosInvertidos = [...productosElegidos].reverse();
  
  productosInvertidos.forEach(producto => {
      const div = document.createElement("div");
      div.classList.add("producto");
      div.innerHTML = `
          <img class="producto-imagen" src="${producto.imagen}" alt="${producto.titulo}">
          <div class="producto-detalles">
              <h3 class="producto-titulo">${producto.titulo}</h3>
              <p class="producto-precio">$${producto.precio}</p>
              <button class="producto-agregar" id="${producto.id}">Agregar</button>
          </div>
      `;
      contenedorProductos.append(div);
  });
  
  actualizarBotonesAgregar();
}



botonesCategorias.forEach(boton => {
  boton.addEventListener("click", (e) => {

    botonesCategorias.forEach(boton => boton.classList.remove("active"));
    e.currentTarget.classList.add("active");

    if (e.currentTarget.id != "todos") {
      const productoCategoria = productos.find(producto => producto.categoria.id === e.currentTarget.id);
      tituloPrincipal.innerText = productoCategoria.categoria.nombre;
      const productosBoton = productos.filter(producto => producto.categoria.id === e.currentTarget.id);
      cargarProductos(productosBoton);
    } else {
      tituloPrincipal.innerText = "Todos los productos";
      cargarProductos(productos);
    }

  })
});
function actualizarBotonesAgregar() {
  botonesAgregar = document.querySelectorAll(".producto-agregar")
  botonesAgregar.forEach(boton => {
    boton.addEventListener("click", (e) => {
      agregarAlCarrito(e);
      Swal.fire({
        title: '¡Producto agregado correctamente!',
        icon: 'success',
        confirmButtonText: 'Aceptar'
      });
    });
  });
}

if (productosEnCarritoLS) {
  productosEnCarrito = JSON.parse(productosEnCarritoLS);
  actualizarNumerito();
} else {
  productosEnCarrito = [];
}

function agregarAlCarrito(e) {
  const idBoton = e.currentTarget.id;
  const productoAgregado = productos.find(producto => producto.id === idBoton)

  if (productosEnCarrito.some(producto => producto.id === idBoton)) {
    const index = productosEnCarrito.findIndex(producto => producto.id === idBoton)
    productosEnCarrito[index].cantidad++;
  } else {
    productoAgregado.cantidad = 1
    productosEnCarrito.push(productoAgregado);
  }
  actualizarNumerito();
  localStorage.setItem("productos-en-carrito", JSON.stringify(productosEnCarrito))
};

function actualizarNumerito() {
  let nuevoNumerito = productosEnCarrito.reduce((acc, producto) => acc + producto.cantidad, 0);
  numerito.innerText = nuevoNumerito;
}


